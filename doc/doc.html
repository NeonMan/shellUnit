<!DOCTYPE html>
<html lang="en">
<!-- Generated by mkdoc.sh -->
<head>
<meta charset="utf-8" />
<title>shellUnit &mdash; Quickstart</title>
<link rel="icon" href="img/favicon.ico" sizes="32x32" />
<link rel="stylesheet" href="css/reset.css" />
<link rel="stylesheet" href="css/shunit.css" />
</head>
<body>
<div id="header">
  <h1>
    <a class="link" href="http://neonman.github.io/shellUnit/">
      <img src="img/shellUnit.png" alt="shellUnit">
    </a>
  </h1></div>
<div id="content">
<table>
<tr id="Introduction">
  <th class="doc">
Introduction
  </th>
  <td class="code"></td>
</tr>
<tr>
<td class="doc">
<p><strong>shellUnit</strong> is a unit-test framework for bash-style and csh-style shells. It provides a way to separate the tests from the scripts, test functions main procedure and code blocks from a shell script.</p>
</td>
<td class="code">

</td>
</tr>
<tr>
<td class="doc">
<p>A set os exaples will we shown now. This document is automatically generated by the mkdoc.sh script in the documents directory so commands and outputs match.</p>
</td>
<td class="code">

</td>
</tr>
<tr id="Sample">
  <th class="doc">
Sample
  </th>
  <td class="code"></td>
</tr>
<tr>
<td class="doc">
<p>A test script is a plain shell script with a few characteristics. Test functions are declared csh-style and start with 'test', also, to be recogniced by automatic directory testing, its extension must be '.shu'</p>
</td>
<td class="code">
<pre><code>#sample-01.shu
testSimpleTest () {
    #Add test here
    #Some shells (bash) don&#39;t like empty functions
    #so we add an echo here
    echo &quot;Test!&quot;
}</code></pre>
</td>
</tr>
<tr id="Running">
  <th class="doc">
Running
  </th>
  <td class="code"></td>
</tr>
<tr>
<td class="doc">
<p>To execute a test file we use the 'shu' command. It needs at least one parameter, indicating either a test file:</p>
</td>
<td class="code">

</td>
</tr>
<tr>
<td class="doc">
<p><span class="cmd"># shu sample-01.shu</span></p>
</td>
<td class="code">
<pre><code>TEST: SimpleTest
-----------------------------------
 All test completed in 1ms
 Warning: No asserts run!
 All assert(s) passed.
-----------------------------------</code></pre>
</td>
</tr>
<tr>
<td class="doc">
<p>Or a directory containing various .shu files</p>
</td>
<td class="code">

</td>
</tr>
<tr>
<td class="doc">
<p><span class="cmd"># shu ./sample-dir/</span></p>
</td>
<td class="code">
<pre><code>TEST: AnotherSimpleTest
-----------------------------------
 All test completed in 1ms
 Warning: No asserts run!
 All assert(s) passed.
-----------------------------------
TEST: SimpleTest
-----------------------------------
 All test completed in 1ms
 Warning: No asserts run!
 All assert(s) passed.
-----------------------------------</code></pre>
</td>
</tr>
<tr id="Targetting">
  <th class="doc">
Targetting
  </th>
  <td class="code"></td>
</tr>
<tr>
<td class="doc">
<p>To provide a target we use the 'shu_loadTarget' function which as a parameter has the path to the shell script to be tested. At pressent, loading a target executes its 'main' procedure (all commands not in a function) so be careful with that.</p>
</td>
<td class="code">
<pre><code>#sample-02.shu
shu_loadTarget ./target.sh

testASample () {
  OUTPUT=`aSample`
  assertEquals $OUTPUT &quot;SAMPLE&quot;
}</code></pre>
</td>
</tr>
<tr>
<td class="doc">
<p>The sample target file:</p>
</td>
<td class="code">
<pre><code>aSample () {
  echo &quot;SAMPLE&quot;
}</code></pre>
</td>
</tr>
<tr>
<td class="doc">
<p>The output of shu ./sample-02/</p>
</td>
<td class="code">
<pre><code>TEST: ASample
 Assert @5 succeeded. (4ms)
-----------------------------------
 All test completed in 4ms
 All assert(s) passed.
-----------------------------------</code></pre>
</td>
</tr>
<tr>
<td class="doc">
<p>The test asserts that 'a_function' will echo the string 'TEST'. <strong>shellUnit</strong> provides many assertions for different situations. here is a test using all the 'basic' asserts.</p>
</td>
<td class="code">
<pre><code>#basic-asserts.shu

#This script will test the the basic asserts

testTrue () {
    assertTrue &quot;[ a = a ]&quot;
}

testFalse () {
    assertFalse &quot;[ a = b ]&quot;
}

testEquals () {
    assertEquals 2 2
    assertEquals &quot;a&quot; &quot;a&quot;
    assertEquals &quot;a&quot; a
    assertEquals &quot;2&quot; 2
}

testNotEquals () {
    assertNotEquals 1 2
    assertNotEquals &quot;A&quot; &quot;B&quot;
    assertNotEquals &quot;3&quot; 4
    assertNotEquals &quot;A&quot; Z
}

testGreaterThan () {
    assertGreaterThan 3 2
    assertGreaterThan &quot;5&quot; 1
}

testNotGreaterThan () {
    assertNotGreaterThan 3 5
    assertNotGreaterThan &quot;3&quot; 7
    assertNotGreaterThan 3 3
}

testLessThan () {
    assertLessThan 3 5
    assertLessThan &quot;3&quot; 5
}

testNotLessThan () {
    assertNotLessThan 5 4
    assertNotLessThan &quot;5&quot; 4
    assertNotLessThan 5 5
}

testMatches () {
    assertMatches &quot;[0-9]-[A-Z]&quot; &quot;1234-ASDF&quot;
}

testNotMatches () {
    assertNotMatches &quot;[0-9]-[A-Z]&quot; &quot;ASDF-1234&quot;
}</code></pre>
</td>
</tr>
<tr>
<td class="doc">
<p>The result of executing this test file is:</p>
</td>
<td class="code">
<pre><code>TEST: True
 Assert @5 succeeded. (3ms)
TEST: False
 Assert @9 succeeded. (3ms)
TEST: Equals
 Assert @13 succeeded. (3ms)
 Assert @14 succeeded. (5ms)
 Assert @15 succeeded. (6ms)
 Assert @16 succeeded. (6ms)
TEST: NotEquals
 Assert @20 succeeded. (3ms)
 Assert @21 succeeded. (6ms)
 Assert @22 succeeded. (5ms)
 Assert @23 succeeded. (5ms)
TEST: GreaterThan
 Assert @27 succeeded. (4ms)
 Assert @28 succeeded. (5ms)
TEST: NotGreaterThan
 Assert @32 succeeded. (3ms)
 Assert @33 succeeded. (5ms)
 Assert @34 succeeded. (7ms)
TEST: LessThan
 Assert @38 succeeded. (3ms)
 Assert @39 succeeded. (6ms)
TEST: NotLessThan
 Assert @43 succeeded. (4ms)
 Assert @44 succeeded. (6ms)
 Assert @45 succeeded. (6ms)
TEST: Matches
 Assert @49 succeeded. (8ms)
TEST: NotMatches
 Assert @53 succeeded. (9ms)
-----------------------------------
 All test completed in 190ms
 All assert(s) passed.
-----------------------------------</code></pre>
</td>
</tr>
<tr>
<td class="doc">
<p><strong>shellUnit</strong> works as a preprocessor for test files. This means that to provide meaningful messages and dispatch tests it reads a test file and its targets and produces a single shell script which is executed. Because of that, some variables won't be accesible from a shell script, most notably the return-value variable$?. To access the return value, the SHU_RV variable is provided.</p>
</td>
<td class="code">
<pre><code>#return-sample.shu

addition () {
  RV=`expr &quot;$1&quot; + &quot;$2&quot;`
  return $RV
}

testReturnValue () {
  addition 10 5
  assertEquals 15 $SHU_RV
  addition 100 0
  assertEquals 203 $SHU_RV
}</code></pre>
</td>
</tr>
<tr>
<td class="doc">
<p>Executing the test will yield the following output. Notice that an assert, wether failed or not, will print the line it is located preceded by an '@', and if failed, a reason why will be provided. Also, any function not starting with 'test' will be ignored by <strong>shellUnit</strong>, this way we can make self-contained tests if wanted.</p>
</td>
<td class="code">
<pre><code>TEST: ReturnValue
 Assert @9 succeeded. (6ms)
 Assert @11 failed. (10ms) Reason: expected &#39;203&#39; but found &#39;100&#39;
-----------------------------------
 All test completed in 16ms
 1 asserts failed.
-----------------------------------</code></pre>
</td>
</tr>
<tr>
<td class="doc">
<p>For testing the 'main' function, as if we called the script from the shell, <strong>shellUnit</strong> provided the 'shu_main' function, which will behave like the shell script.</p>
</td>
<td class="code">
<pre><code>testMain () {
    shu_main &quot;A parameter&quot; &quot;another param&quot;
    #Asserts below this line...
}</code></pre>
</td>
</tr>
<tr id="Results">
  <th class="doc">
Results
  </th>
  <td class="code"></td>
</tr>
<tr>
<td class="doc">
<p><strong>shellUnit</strong> results can be formatted in different ways, the results shown so far being the default output formatter. So far, all samples were using the default 'pretty' formatter.</p>
</td>
<td class="code">

</td>
</tr>
<tr>
<td class="doc">
<p>The 'raw' output formatter present the test result as CSV. Raw output can be activated by passing the --raw option to <strong>shellUnit</strong>. This format is intended to be used by other programs as its input. It provides various information about the tests and asserts being run.</p>
</td>
<td class="code">

</td>
</tr>
<tr>
<td class="doc">
<p>An example of the raw output, using the basic asserts files:</p>
</td>
<td class="code">

</td>
</tr>
<tr>
<td class="doc">
<p><span class="cmd"># shu --raw basic-asserts.shu</span></p>
</td>
<td class="code">
<pre><code>SHU,TEST,1395727264390,basic-asserts.shu,True
SHU,ASSERT,basic-asserts.shu,True,5,1395727264390,1395727264393,OK,
SHU,TEST,1395727264399,basic-asserts.shu,False
SHU,ASSERT,basic-asserts.shu,False,9,1395727264399,1395727264402,OK,
SHU,TEST,1395727264409,basic-asserts.shu,Equals
SHU,ASSERT,basic-asserts.shu,Equals,13,1395727264409,1395727264411,OK,
SHU,ASSERT,basic-asserts.shu,Equals,14,1395727264411,1395727264416,OK,
SHU,ASSERT,basic-asserts.shu,Equals,15,1395727264416,1395727264420,OK,
SHU,ASSERT,basic-asserts.shu,Equals,16,1395727264420,1395727264425,OK,
SHU,TEST,1395727264432,basic-asserts.shu,NotEquals
SHU,ASSERT,basic-asserts.shu,NotEquals,20,1395727264432,1395727264434,OK,
SHU,ASSERT,basic-asserts.shu,NotEquals,21,1395727264434,1395727264438,OK,
SHU,ASSERT,basic-asserts.shu,NotEquals,22,1395727264438,1395727264443,OK,
SHU,ASSERT,basic-asserts.shu,NotEquals,23,1395727264443,1395727264447,OK,
SHU,TEST,1395727264454,basic-asserts.shu,GreaterThan
SHU,ASSERT,basic-asserts.shu,GreaterThan,27,1395727264454,1395727264457,OK,
SHU,ASSERT,basic-asserts.shu,GreaterThan,28,1395727264457,1395727264461,OK,
SHU,TEST,1395727264467,basic-asserts.shu,NotGreaterThan
SHU,ASSERT,basic-asserts.shu,NotGreaterThan,32,1395727264467,1395727264470,OK,
SHU,ASSERT,basic-asserts.shu,NotGreaterThan,33,1395727264470,1395727264475,OK,
SHU,ASSERT,basic-asserts.shu,NotGreaterThan,34,1395727264475,1395727264479,OK,
SHU,TEST,1395727264485,basic-asserts.shu,LessThan
SHU,ASSERT,basic-asserts.shu,LessThan,38,1395727264485,1395727264487,OK,
SHU,ASSERT,basic-asserts.shu,LessThan,39,1395727264487,1395727264493,OK,
SHU,TEST,1395727264499,basic-asserts.shu,NotLessThan
SHU,ASSERT,basic-asserts.shu,NotLessThan,43,1395727264499,1395727264501,OK,
SHU,ASSERT,basic-asserts.shu,NotLessThan,44,1395727264501,1395727264505,OK,
SHU,ASSERT,basic-asserts.shu,NotLessThan,45,1395727264505,1395727264510,OK,
SHU,TEST,1395727264517,basic-asserts.shu,Matches
SHU,ASSERT,basic-asserts.shu,Matches,49,1395727264517,1395727264523,OK,
SHU,TEST,1395727264530,basic-asserts.shu,NotMatches
SHU,ASSERT,basic-asserts.shu,NotMatches,53,1395727264530,1395727264535,OK,</code></pre>
</td>
</tr>
<tr>
<td class="doc">
<p>The CSV format is not yet frozen so no information on what each column is will be provided until then.</p>
</td>
<td class="code">

</td>
</tr>
<tr id="Setup/Teardown">
  <th class="doc">
Setup/Teardown
  </th>
  <td class="code"></td>
</tr>
<tr>
<td class="doc">
<p>Test scripts may optionally have a 'setup' and 'teardown' function, which will be executed before and after every test respectively.</p>
</td>
<td class="code">
<pre><code>#sample_test.shu

setup () {
    #Test setup goes here:
}

teardown () {
    #Test teardown goes here
}

testOne () {
    #A test
}

testTwo () {
    #Another test
}</code></pre>
</td>
</tr>
<tr id="Groups">
  <th class="doc">
Groups
  </th>
  <td class="code"></td>
</tr>
<tr id="Parametrizing">
  <th class="doc">
Parametrizing
  </th>
  <td class="code"></td>
</tr>
</table>
</div>
<div id="footer">
  <p>
   © 2014 shellUnit, see <a href="COPYING.txt">copying</a> for copyright information.
  </p>
  <a class="link" href="humans.txt" target="_blank"><img src="img/humanstxt-transparent-color.png" alt="humans.txt"></a>
  <a class="link" href="https://github.com/NeonMan/shellUnit" target="_blank">
  <img src="img/blacktocat.png" alt="View shellUnit on GitHub">
  </a>
</div>

<div id="menu">
<ul>

      <li><h3><a href="#Introduction">Introduction</a></h3></li>
      <li><h3><a href="#Sample">Sample</a></h3></li>
      <li><h3><a href="#Running">Running</a></h3></li>
      <li><h3><a href="#Targetting">Targetting</a></h3></li>
      <li><h3><a href="#Results">Results</a></h3></li>
      <li><h3><a href="#Setup/Teardown">Setup/Teardown</a></h3></li>
      <li><h3><a href="#Groups">Groups</a></h3></li>
      <li><h3><a href="#Parametrizing">Parametrizing</a></h3></li>
</ul>
</div>
</body></html>
